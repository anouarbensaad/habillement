<div class="container-fluid" ng-controller="confirmationLivraisonController">
	<div class="row" ng-show="displayMode != 'edit'">
		<div class="col-sm-12">
			<button class="btn btn-action2 pull-right" ng-click="AffectationOF(ordreFabricationCourant)"
				ng-disabled="">Ajouter</button>
		</div>
		<!-- Critere de recherche -->
		<div class="col-sm-12">
			<div class="title-ajout">Crit&eacute;res de recherche</div>
			<div class="panel panel-primary">
				<div class="panel-body">
					<form class="form-horizontal" id="rechercheOFForm" novalidate name="rechercheOFForm">
						<div class="form-group">
							<div class="row">
								<div class="col-sm-3">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Client
										</span> <select class="form-control" ng-model="ordreFabricationCourant.clientId"
											ng-init="ordreFabricationCourant.clientId =''" data-placeholder="..."
											style="width: 100%">
											<OPTION value="">Tous les Clients</OPTION>
											<option ng-repeat="client in ListClientOFCache" value="{{client.id}}">
												{{client.abreviation}}</option>
										</select>
									</div>
								</div>
								<div class="col-sm-3">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">OF
										</span> <input type="text" class="form-control"
											ng-model="ordreFabricationCourant.vNumero">
									</div>
								</div>
								
								<div class="col-sm-3">
										<div class="input-group input-group-sm">
											<span class="input-group-addon label1" id="basic-addon1">Reference
											</span><input type="text" class="form-control"
											ng-model="ordreFabricationCourant.referenceProduit">
										</div>
									</div>
								
								
								<div class="col-sm-3">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Designation
										</span><input type="text" class="form-control"
										ng-model="ordreFabricationCourant.designationProduit">
									</div>
								</div>

							



				<!-- 				<div class="col-sm-3">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Atelier</span>
										<select class="form-control" ng-model="ordreFabricationCourant.idSite"
											ng-init="ordreFabricationCourant.idSite =''" data-placeholder="..."
											style="width: 100%">
											<option value="">Tous</option>
											<option ng-repeat="site in listeSitePartieInteresseeCache"
												value="{{site.id}}">{{site.nom}}</option>
										</select>
									</div>
								</div> -->

								<!-- 		<div class="col-sm-3">
									<div class="input-group">

										<span class="input-group-addon label1" id="basic-addon1">Type
										</span> <select class="form-control"
											ng-model="ordreFabricationCourant.type"
											ng-disabled="selectChoice">
											<OPTION value="Ferme" ng-selected="true">Ferme</OPTION>
											<OPTION value="Previsionnelle">Previsionnelle</OPTION>
										</select>
									</div>
								</div> -->
							</div>
						</div>
						<div class="form-group">
							<div class="row">
							
									<div class="col-sm-3" ng-controller="DatepickerDemoController">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Date Intro.
										</span> <input type="text" class="form-control datepicker"
											uib-datepicker-popup="{{format}}"
											ng-init="ordreFabricationCourant.vDateIntroductionDu =''"
											ng-model="ordreFabricationCourant.vDateIntroductionDu" is-open="opened"
											datepicker-options="dateOptions" date-="enabled(date, mode)"
											ng-required="true" close-text="Close" />
										<div class="input-group-btn">
											<button type="button" class="btn btn-default" ng-click="open($event)">
												<i class="glyphicon glyphicon-calendar"></i>
											</button>
										</div>
									</div>
								</div>

				
									<div class="col-sm-3" ng-controller="DatepickerDemoController">
										<div class="input-group input-group-sm">
											<span class="input-group-addon label1" id="basic-addon1">A
											</span> <input type="text" class="form-control datepicker"
												uib-datepicker-popup="{{format}}"
												ng-init="ordreFabricationCourant.vDateIntroductionAu =''"
												ng-model="ordreFabricationCourant.vDateIntroductionAu" is-open="opened"
												datepicker-options="dateOptions" date-="enabled(date, mode)"
												ng-required="true" close-text="Close" />
											<div class="input-group-btn">
												<button type="button" class="btn btn-default" ng-click="open($event)">
													<i class="glyphicon glyphicon-calendar"></i>
												</button>
											</div>
										</div>
									</div>
							
							
							
								<div class="col-sm-3" ng-controller="DatepickerDemoController">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Date
											Livraison</span> <input type="text" class="form-control datepicker"
											uib-datepicker-popup="{{format}}"
											ng-init="ordreFabricationCourant.dateLivraisonDu =''"
											ng-model="ordreFabricationCourant.dateLivraisonDu" is-open="opened"
											datepicker-options="dateOptions" date-="enabled(date, mode)"
											ng-required="true" close-text="Close" />
										<div class="input-group-btn">
											<button type="button" class="btn btn-default" ng-click="open($event)">
												<i class="glyphicon glyphicon-calendar"></i>
											</button>
										</div>
									</div>
								</div>

								<div class="col-sm-3" ng-controller="DatepickerDemoController">
										<div class="input-group input-group-sm">
											<span class="input-group-addon label1" id="basic-addon1">A
												 </span> <input type="text" class="form-control datepicker"
												uib-datepicker-popup="{{format}}"
												ng-init="ordreFabricationCourant.dateLivraisonTo =''"
												ng-model="ordreFabricationCourant.dateLivraisonTo" is-open="opened"
												datepicker-options="dateOptions" date-="enabled(date, mode)"
												ng-required="true" close-text="Close" />
											<div class="input-group-btn">
												<button type="button" class="btn btn-default" ng-click="open($event)">
													<i class="glyphicon glyphicon-calendar"></i>
												</button>
											</div>
										</div>
									</div>

						

					<!-- 			<div class="col-sm-3">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Etat</span>
										<select class="form-control" ng-init="ordreFabricationCourant.vEtat =''"
											ng-model="ordreFabricationCourant.vEtat">
											<option ng-repeat="etat in listeEtatOrdreFabrication" value="{{etat.id}}">
												{{etat.designation}}</option>
										</select>
									</div>
								</div> -->


							<!-- 	<div class="col-sm-3">
									<div class="input-group">
										<input type="checkbox" ng-model="ordreFabricationCourant.aPlanifier" />
										Planifi&eacute;
									</div>
								</div> -->

							</div>
						</div>

						<div class="form-group">
							<div class="row">
								<div class="col-sm-2">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Etat Coupe</span>
										<select class="form-control" ng-init="ordreFabricationCourant.etatCoupe ='tout'"
											ng-model="ordreFabricationCourant.etatCoupe">
											<option value="tout">Tous</option>
											<option value="0">0</option>
											<option value="-" selected>-</option>
											<option value="PLUS">+</option>
											<option value="=" selected>=</option>
										</select>
									</div>
								</div>
								
									<div class="col-sm-2">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Etat Eng.</span>
										<select class="form-control" ng-init="ordreFabricationCourant.etatEngagement ='tout'"
											ng-model="ordreFabricationCourant.etatEngagement">
											<option value="tout">Tous</option>
											<option value="0">0</option>
											<option value="-" selected>-</option>
											<option value="PLUS">+</option>
											<option value="=" selected>=</option>
										</select>
									</div>
								</div>

								<div class="col-sm-2">
										<div class="input-group input-group-sm">
											<span class="input-group-addon label1" id="basic-addon1">Etat Fab.</span>
											<select class="form-control" ng-init="ordreFabricationCourant.etatFabrication ='tout'"
												ng-model="ordreFabricationCourant.etatFabrication">
												<option value="tout">Tous</option>
												<option value="0">0</option>
												<option value="-" selected>-</option>
												<option value="PLUS">+</option>
												<option value="=" selected>=</option>
											</select>
										</div>
									</div>
									<div class="col-sm-2">
											<div class="input-group input-group-sm">
												<span class="input-group-addon label1" id="basic-addon1">Etat Cond.</span>
												<select class="form-control" ng-init="ordreFabricationCourant.etatConditionnement ='tout'"
													ng-model="ordreFabricationCourant.etatConditionnement">
													<option value="tout">Tous</option>
													<option value="0">0</option>
													<option value="-" selected>-</option>
													<option value="PLUS">+</option>
													<option value="=" selected>=</option>
												</select>
											</div>
										</div>
										<div class="col-sm-2">
												<div class="input-group input-group-sm">
													<span class="input-group-addon label1" id="basic-addon1">Etat Colisage</span>
													<select class="form-control" ng-init="ordreFabricationCourant.etatCollisage ='tout'"
														ng-model="ordreFabricationCourant.etatCollisage">
														<option value="tout">Tous</option>
														<option value="0">0</option>
														<option value="-" selected>-</option>
														<option value="PLUS">+</option>
														<option value="=" selected>=</option>
													</select>
												</div>
											</div>

											<div class="col-sm-2">
													<div class="input-group input-group-sm">
														<span class="input-group-addon label1" id="basic-addon1">Etat Exp.</span>
														<select class="form-control" ng-init="ordreFabricationCourant.etatExpedition ='tout'"
															ng-model="ordreFabricationCourant.etatExpedition">
															<option value="tout">Tous</option>
															<option value="0">0</option>
															<option value="-" selected>-</option>
															<option value="PLUS">+</option>
															<option value="=" selected>=</option>
														</select>
													</div>
												</div>

							</div>
						</div>
						
						
						
								<div class="form-group">
							<div class="row">
								<div class="col-sm-3">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Etat
										</span> <select class="form-control"
											ng-model="ordreFabricationCourant.urgent"
											ng-init="ordreFabricationCourant.urgent =''"
											style="width: 100%">
											<OPTION value="">TOUT</OPTION>
											<OPTION value="URGENT">URGENT</OPTION>
											<OPTION value="NON URGENT">NON URGENT</OPTION>
										</select>
									</div>
								</div>
								
										<div class="col-sm-3">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Solder
										</span> <select class="form-control"
											ng-model="ordreFabricationCourant.solder"
											ng-init="ordreFabricationCourant.solder =''"
											style="width: 100%">
											<OPTION value="">TOUT</OPTION>
											<OPTION value="true">OUI</OPTION>
											<OPTION value="false">NON</OPTION>
										</select>
									</div>


								</div>
								
							</div>
						</div>
						
							

					</form>
					<div class="pull-right">
						<button class="btn-action btn"
							ng-click="downloadAllOrdreFabrication(ordreFabricationCourant)">Générer</button>
						<button class="btn-action btn"
							ng-click="rechercherOrdreFabrication(ordreFabricationCourant)">Recherecher</button>
						<button class="btn-action btn" ng-click="annulerAjout()">Annuler</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- container d'ajout,  modification et de consultation GPAO-->
	<div class="row" ng-show="displayMode == 'edit'">
		<div class="col-sm-12">
			<div class="pull-right">
				<button class="btn btn-action" ng-click="sauvegarderAjout(ordreFabricationCourant)"
					ng-disabled="!creationOFForm.$valid ">Enregistrer</button>
				<!-- 					<button class="btn-action btn" >Générer</button> -->
				<button class="btn btn-action" ng-click="annulerAjout()">Retour</button>
			</div>
		</div>
		<div class="col-md-12">
			<div class="title-ajout">Ordre de Fabrication</div>
			<div class="panel panel-primary">
				<div class="panel-body">
					<form name="creationOFForm" id="creationOFForm">
						<div class="form-group">
							<div class="row">
								<div class="col-sm-3">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">N°<i
												style="color: red">*</i>
										</span> <input type="text" class="form-control"
											ng-model="ordreFabricationCourant.numero" required
											ng-change="initNumeroErrorValue()">
									</div>
								</div>
								<div class="col-sm-3">
									<div class="input-group">

										<span class="input-group-addon label1" id="basic-addon1">Type
										</span> <select class="form-control" ng-model="ordreFabricationCourant.type"
											ng-disabled="selectChoice">
											<OPTION value="Ferme" ng-selected="true">Ferme</OPTION>
											<OPTION value="Previsionnelle">Previsionnelle</OPTION>
										</select>
									</div>
								</div>
								<div class="col-sm-3" ng-controller="DatepickerDemoController">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Date
											Livraison</span> <input type="text" class="form-control datepicker"
											uib-datepicker-popup="{{format}}"
											ng-model="ordreFabricationCourant.dateLivraison" is-open="opened"
											datepicker-options="dateOptions" date-="enabled(date, mode)"
											close-text="Close" />
										<div class="input-group-btn">
											<button type="button" class="btn btn-default" ng-click="open($event)">
												<i class="glyphicon glyphicon-calendar"></i>
											</button>
										</div>
									</div>
								</div>

								<div class="col-sm-3">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Cadence</span>
										<input type="text" class="form-control"
											ng-model="ordreFabricationCourant.cadence" disabled />
									</div>
								</div>
							</div>
						</div>
						<div class="form-group">
							<div class="row">



								<div class="col-sm-3">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Réf.Produit
										</span> <select ui-select2 ng-model="ordreFabricationCourant.produitId"
											ng-init="ordreFabricationCourant.produitId =''" data-placeholder="..."
											style="width: 100%" ng-change="change()" required>
											<option value="">Tous</option>
											<option ng-repeat="produit in listProduitDrop" value="{{produit.id}}">
												{{produit.reference}}</option>
										</select>
									</div>
								</div>
								<div class="col-sm-3">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Quantite</span>
										<input type="text" class="form-control"
											ng-model="ordreFabricationCourant.quantite" required />
									</div>
								</div>
								<div class="col-sm-3">
									<div class="input-group input-group-sm">
										<span class="input-group-addon label1" id="basic-addon1">Atelier
										</span> <select ui-select2 ng-model="ordreFabricationCourant.idSite"
											ng-init="ordreFabricationCourant.idSite =''" data-placeholder="..."
											style="width: 100%">
											<option value="">Tous</option>
											<option ng-repeat="site in listeSitePartieInteresseeCache"
												value="{{site.id}}">{{site.nom}}</option>
										</select>
									</div>
								</div>


								<div class="col-sm-3">
									<div class="input-group">
										<input type="checkbox" ng-model="ordreFabricationCourant.special" disabled />
										Special
									</div>
								</div>

							</div>
						</div>

					</form>
				</div>

			</div>
		</div>
	</div>

	<!-- Grid OF -->
	<div class="row" ng-show="displayMode != 'edit'">
		<div class="col-md-12">
			<div class="title-ajout line">Liste des Commandes</div>
			<div class="row">
				<div class="input-icon right mb10 col-md-3 pull-right">
					<input placeholder="Taper un terme de recherche" type="text" ng-model="filterOptions.filterText"
						class="form-control">
				</div>
			</div>
			<div style="height: 500px;" ng-grid="gridOptions"></div>
		</div>
		<div class="pull-right" style="margin-top:2%">
			<button class="btn-action btn" ng-click="confirmationDateLivraison()">Sauvegarder</button>
		</div>
	</div>
	<!-- Popup de la suppression -->
	<!-- 		<div id="light" class="white_content"> -->
	<!-- 			<pop-up type="delete-Of"></pop-up> -->
	<!-- 		</div> -->
	<!-- 		<div id="fade" class="black_overlay"></div> -->
	<!-- Fin Popup de la suppression -->

</div>